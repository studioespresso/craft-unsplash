{# @var craft \craft\web\twig\variables\CraftVariable #}
{% extends "_layouts/cp" %}
{% import "_includes/tabs" as tabs %}

{% do view.registerAssetBundle("studioespresso\\splashingimages\\assetbundles\\splashingimages\\SplashingImagesAsset") %}

{# The title of this CP section #}
{% set plugin = craft.app.plugins.getPlugin('splashing-images') %}
{% set title = plugin.settings.pluginLabel ?? "Splashing Images" %}

{% set tabs = {
    curated: { url: url('splashing-images'), label: '‚è± Latest'},
    latest: { url: url('splashing-images/curated'), label: '‚≠ê CuratedÔ∏è'},
} %}

{% if user %}
    {% set tabs = tabs|merge({
        likes: { url: url('splashing-images/likes'), label: '‚ù§Ô∏è Likes' },
        collections: { url: url('splashing-images/collections'), label: 'üìñ Collections' }
    }) %}
{% endif %}


{% if lastSearch is defined %}
    {% set searchTab = {
        lastSearch: { label: "Last search: "|t ~ lastSearch, url: url('splashing-images/search?q=' ~ lastSearch)},
    } %}
    {% set tabs = tabs|merge(searchTab) %}
{% endif %}

{% set selectedTab = 'likes' %}

{% block actionButton %}
    {% include "splashing-images/_includes/_search" %}
{% endblock %}

{# The content of the CP Section#}
{% block content %}
    {% include "splashing-images/_includes/_images" %}
    <script type="text/javascript">
        window.csrfTokenName = "{{ craft.app.config.general.csrfTokenName }}";
        window.csrfTokenValue = "{{ craft.app.request.csrfToken }}";
    </script>
{% endblock %}
